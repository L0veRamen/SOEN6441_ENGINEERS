# This is the main configuration file for the application.
# https://www.playframework.com/documentation/latest/ConfigFile
# ==================== APPLICATION ====================
play.application.name = "NotiLytics"

# ==================== NEWSAPI ====================
newsapi {
  key = "721974412ce842c49815b6be1e0f0182"
  baseUrl = "https://newsapi.org/v2"
  timeouts {
    connect = 3s
    read = 5s
  }
}

# ==================== HTTP SERVER ====================
play.server.http.port = 9000

# ==================== SESSION CONFIGURATION ====================
play.http.session {
  # Session cookie name
  cookieName = "NOTILYTICS_SESSION"

  # Maximum session age (1 hour)
  maxAge = 3600000

  # HTTP only (prevent JavaScript access)
  httpOnly = true

  # Secure flag (set to true in production with HTTPS)
  secure = false

  # SameSite policy
  sameSite = "lax"
}

# ==================== CACHING CONFIGURATION ====================
cache {
  ttl {
    search = 15m    # Search results cache TTL
    stats = 15m     # Word stats cache TTL
    sources = 60m   # News sources cache TTL
  }
  maxSize = 1000    # Max cache entries
}

# ==================== HISTORY CONFIGURATION ====================
history {
  ttl = 2h          # Session history TTL (idle timeout)
  maxSessions = 10000
}

# ==================== TIMEZONE ====================
app.timezone = "America/Toronto"

# ==================== SECURITY FILTERS ====================
play.filters.enabled += "play.filters.csrf.CSRFFilter"
play.filters.enabled += "play.filters.headers.SecurityHeadersFilter"
play.filters.enabled += "play.filters.hosts.AllowedHostsFilter"

# Allowed hosts
play.filters.hosts {
  allowed = ["localhost:9000", "127.0.0.1:9000"]
}

# CSRF Configuration
play.filters.csrf {
  cookie.name = "NOTILYTICS_CSRF"
  header.name = "X-CSRF-Token"
}

# Security Headers
play.filters.headers {
  contentSecurityPolicy = "default-src 'self'"
  frameOptions = "DENY"
  xssProtection = "1; mode=block"
  contentTypeOptions = "nosniff"
}

# ==================== GUICE MODULES ====================
play.modules.enabled += "modules.AppModule"

# ==================== LOGGING ====================
logger.root = WARN
logger.play = INFO
logger.application = DEBUG
logger.controllers = DEBUG
logger.services = DEBUG

# Don't log API keys
logger.services.NewsApiClient = INFO

play.modules.enabled += "play.libs.ws.ahc.AhcWSModule"